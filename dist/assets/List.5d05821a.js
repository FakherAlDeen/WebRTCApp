import{U as n,r as l,w as x,o as a,c as i,a as e,t as r,d as C,q as H,v as $,s as I,b as m,F as D,z as B,e as Y,l as ge,T as fe,B as V,m as W,p as pe,j as _e,f as xe,g as M,C as ye}from"./index.35e50974.js";import{C as we}from"./chatBubble.b7bf9e26.js";import{_ as Ce}from"./_plugin-vue_export-helper.cdc0426e.js";const ke={class:"modal-box"},De={class:"font-bold text-lg"},Me={class:"py-4"},Ie={key:0,class:"text-red-500"},Ae={class:"modal-action"},Re={__name:"ModalForFriend",props:{Header:{type:String},txt:{type:String},btn:{type:String},btn2:{type:String},open:{type:Boolean}},emits:["onClose"],setup(v,{emit:A}){const _=v,k=n(),c=l(""),d=l(""),h=l(_.open);console.log(open.value),x(()=>_.open,(f,u)=>{console.log("Watch props.selected function called with args:",f,u),c.value="",h.value=f}),console.log(_.open),console.log(h.value);function R(){if(c.value==""){d.value="invalid empty username!";return}k.AddFriend(c.value),x(()=>k.ServerAns,(f,u)=>{console.log("Watch props.selected function called with args:",f,u),d.value=f})}return(f,u)=>(a(),i("div",{class:I(["modal",{"modal-open":h.value}]),id:"my-modal-2"},[e("div",ke,[e("label",{for:"my-modal-3",class:"btn btn-sm btn-circle absolute right-2 top-2",onClick:u[0]||(u[0]=p=>{A("onClose")})},"\u2715"),e("h3",De,r(v.Header),1),e("p",Me,r(v.txt),1),d.value!=null||d.value!=""?(a(),i("p",Ie,r(d.value),1)):C("",!0),H(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered w-full","onUpdate:modelValue":u[1]||(u[1]=p=>c.value=p)},null,512),[[$,c.value]]),e("div",Ae,[e("a",{class:"btn btn-error",onClick:u[2]||(u[2]=p=>{A("onClose")})},r(v.btn),1),e("a",{class:"btn btn-success",onClick:R},r(v.btn2),1)])])],2))}};const y=v=>(pe("data-v-10607a50"),v=v(),_e(),v),Le={class:"z-0 h-full flex flex-col"},Ne=y(()=>e("p",{class:"text-3xl font-light mt-10 ml-10 mb-5"},"Dashboard",-1)),Se={class:"flex w-full h-full bg-base-200"},Fe={class:"w-[80vw]"},Be={class:"card bg-base-100 shadow-xl z-0 w-full ml-5 mr-10 h-fit mt-10 overflow-hidden"},He={class:"card-body items-center text-center w-full"},$e=y(()=>e("h2",{class:"card-title"},"Your Friend list",-1)),Oe={key:0,class:"overflow-y-auto w-full max-h-[12rem]"},Te={class:"table w-full"},Je=y(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"First Name"),e("th",{class:"text-center"},"Last Name"),e("th",{class:"text-center"},"Username"),e("th",{class:"text-center"},"Actions"),e("th",{class:"text-center"})])],-1)),Ue={class:"bg-gray-200"},Ee=["onClick"],qe=["onClick"],ze=["onClick"],je={key:1,class:"card-title text-slate-500 font-light text-base"},Ge={class:"card bg-base-100 shadow-xl z-0 w-full ml-5 mr-10 h-fit mt-10 overflow-hidden"},Ye={class:"card-body items-center text-center w-full"},Ve=y(()=>e("h2",{class:"card-title"},"Your Meeting History",-1)),We={key:0,class:"overflow-y-auto w-full max-h-[10rem]"},Pe={class:"table w-full"},Ke=y(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"Meeting Name"),e("th",{class:"text-center"},"Last Time"),e("th",{class:"text-center"},"CreatedBy"),e("th",{class:"text-center"},"Actions")])],-1)),Qe={class:"bg-gray-200 text-center"},Xe=["onClick"],Ze={key:1,class:"card-title text-slate-500 font-light text-base"},et={class:"flex"},tt={class:"flex-1 flex-col m-5 w-full box-border"},nt={class:"max-w-[23rem] w-[23rem] card h-fit bg-base-100 drop-shadow-xl m-5 z-0 bg-[#79cfcd] mt-5 my-auto box-border"},ot={class:"flex w-full justify-center space-x-2 mt-3"},st={class:"card-body items-center text-center m-auto box-border pt-2 pb-4"},lt={class:"card-title text-white"},at={key:0,class:"text-red-700"},it={class:"card w-fit h-fit max-w-[23rem] w-[23rem] bg-base-100 drop-shadow-xl mx-5 h-full z-0 bg-[#f14e6d] mt-5 my-auto"},rt={class:"flex w-full justify-center space-x-2 mt-3"},ct={class:"card-body items-center text-center m-auto pt-2 pb-4"},ut={class:"card-title text-white"},dt={key:0,class:"text-red-700"},mt={class:"card-actions"},vt={class:"card bg-base-100 shadow-xl max-w-[23rem] w-[23rem] mx-5 h-fit z-0 m-5"},ht={class:"card-body items-center text-center m-auto w-full"},bt=y(()=>e("h2",{class:"card-title"},"Your Request List",-1)),gt={key:0,class:"overflow-y-auto w-full max-h-[5rem]"},ft={class:"table w-full"},pt=y(()=>e("thead",null,[e("tr",null,[e("th",null,"Username"),e("th",null,"Action")])],-1)),_t=["onClick"],xt=["onClick"],yt={key:1,class:"card-title text-slate-500 font-extralight text-base"},wt={key:1,class:"card-title text-slate-500 font-light text-base"},Ct={key:0,class:"h-full w-1/3 bg-white fixed right-0 bottom-0 drop-shadow-xl inner z-50"},kt={class:"card-title font-light ml-14 mt-12 text-2xl"},Dt=xe(r("chat with ")+" "),Mt={class:"text-blue-500 font-medium"},It={class:"flex flex-col h-5/6 relative top-10 items-center text-center"},At={class:"grow w-full overflow-auto"},Rt={__name:"List",setup(v){const A="https://fakher.13.development.maqsam.com";n().pageImIn="List",n().IsAGuest||(n().setupSocket(),n().ConnectionSocket("createRoom",{type:"OutOfMeeting",id:n().userDetails.id}),n().getFriendsList(),n().getRequestList(),n().getNotificationList(),n().WebSocket.on("MesagesNoMeeting",t=>{se(t)}),n().getDocumentList(),n().getMeetingList());const _=l(),k=l(),c=l({}),d=l(""),h=l(""),R=l(""),f=l(""),u=l(!1),p=l(!1),b=l(""),O=l(!1),P=l(""),T=l(!1),K=l(""),Q=l(""),w=l(""),L=l(""),N=l(""),J=l("Enter your Sharing ID"),U=l("Join a meeting"),E=l("Enter your Sharing ID"),q=l("Join a Document"),z=l("Join"),j=l("Join"),S=l(!0),F=l(!0),X=()=>{J.value="Enter you Room name to create",U.value="Create a meeting",z.value="Create",S.value=!1},Z=()=>{J.value="Enter your Sharing ID",U.value="Join a meeting",z.value="Join",S.value=!0},ee=()=>{E.value="Enter you Room name to create",q.value="Create a Document",j.value="Create",F.value=!1},te=()=>{E.value="Enter your Sharing ID",q.value="Join a Document",j.value="Join",F.value=!0};oe();async function ne(){if(w.value=="")N.value="please enter the room you wanna enter or create!";else if(j.value=="Create"){await n().CreateDocument(w.value);let t=null;x(()=>n().ServerAns,(s,o)=>{console.log("first",s),console.log("sec",o),t=s,console.log("ser",t),t.stringAns=="Done!"&&M.push({name:"docs",params:{RoomName:w.value,RoomID:t.id}})})}else{n().CheckDocument(w.value);let t=null;x(()=>n().ServerAns,(s,o)=>{console.log("first",s),console.log("sec",o),t=s,console.log("ser",t),t.stringAns=="Done!"?M.push({name:"docs",params:{RoomName:t.name,RoomID:t.id}}):N.value=t.stringAns})}}async function oe(){let t=await n().FriendList;console.log(t);for(let s=0;s<t.length;s++)c.value[t[s].chatID]="";console.log(c.value)}function se(t){if(console.log(t),t.type=="refresh"){n().getRequestList(),n().getFriendsList(),n().getNotificationList();return}else t.type=="chatOutOfMeeting"?le(t):t.type=="invite"?(ve(t),n().pageImIn!="List"&&n().Notify.push(t)):t.type=="ReplyInvite"&&(he(t),n().pageImIn!="List"&&n().Notify.push(t))}function le(t){c.value[t.chatID].push({from:t.from,msg:t.msg,name:t.name}),console.log(c.value)}async function ae(t){let s=null,o={chatID:t};ye.post(A+"/GetChat",o).then(g=>s=g.data).then(()=>{console.log("chat",s),c.value[t]=s})}async function ie(t,s,o,g){h.value=o,f.value=t+" "+s,R.value=g,await ae(o),console.log(n().ServerAns),console.log("chatarray",c.value),u.value=!u.value}function re(){if(d.value=="")return;console.log(d.value),console.log("chat",c.value);let t={type:"chatOutOfMeeting",msg:d.value,from:n().userDetails.id,name:n().userDetails.Fname+" "+n().userDetails.Lname,to:R.value,flag:!0,chatID:h.value};console.log(t),c.value[h.value]||(c.value[h.value]=[]),c.value[h.value].push({from:t.from,msg:t.msg,name:t.name}),n().EmmitMsg("OutOfMeeting",t),d.value=""}function ce(){u.value=!u.value}async function ue(){if(b.value==""){L.value="please enter the room you wanna enter or create!";return}else if(z.value=="Create"){await n().CreateMeeting(b.value);let t=null;x(()=>n().ServerAns,(s,o)=>{console.log("first",s),console.log("sec",o),t=s,console.log("ser",t),t.stringAns=="Done!"&&M.push({name:"meeting",params:{RoomName:b.value,RoomID:t.id}})})}else{n().CheckMeeting(b.value);let t=null;x(()=>n().ServerAns,(s,o)=>{console.log("first",s),console.log("sec",o),t=s,console.log("ser",t),t.stringAns=="Done!"?M.push({name:"meeting",params:{RoomName:t.name,RoomID:t.id}}):L.value=t.stringAns})}}function de(){p.value=!0}const G=l();async function me(t){let s=null;n().MyMeeting?(s={type:"invite",from:n().userDetails.id,username:n().userDetails.username,name:n().userDetails.Fname+" "+n().userDetails.Lname,to:t,room:n().MyMeeting,roomName:n().userDetails.username+" Meeting",flag:!0},n().EmmitMsg("OutOfMeeting",s)):(n().CreateMeeting(n().userDetails.username+" Meeting",!0),x(()=>n().MyMeeting,(o,g)=>{G.value=o,console.log(G.value),s={type:"invite",from:n().userDetails.id,username:n().userDetails.username,name:n().userDetails.Fname+" "+n().userDetails.Lname,to:t,room:n().MyMeeting,roomName:n().userDetails.username+" Meeting",flag:!0},n().EmmitMsg("OutOfMeeting",s)}),console.log(G.value))}function ve(t){k.value=t.from,P.value="You got invited to a meeting by "+t.name,O.value=!0,_.value=t.roomName,b.value=t.room}function he(t){Q.value='<span class= "text-blue-600 font-bold text-lg">'+t.name+"</span> Accepted you invitation",K.value='you can Go to the meeting now or use this Room ID: <span class= "text-red-600"> <br>'+t.room+"</span> to enter Later",b.value=t.room,_.value=t.roomName,T.value=!0}function be(t,s){n().CheckMeeting(t),M.push({name:"meeting",params:{RoomName:s,RoomID:t}})}return(t,s)=>(a(),i("div",Le,[Ne,e("div",Se,[e("div",Fe,[e("div",Be,[e("div",He,[$e,m(n)().FriendList.length>0?(a(),i("div",Oe,[e("table",Te,[Je,e("tbody",Ue,[(a(!0),i(D,null,B(m(n)().FriendList,o=>(a(),i("tr",{key:o},[e("td",null,r(o.Fname),1),e("td",null,r(o.Lname),1),e("td",null,r(o.username),1),e("td",null,[e("button",{class:"btn btn-xs m-1",onClick:g=>ie(o.Fname,o.Lname,o.chatID,o.id)},"chat",8,Ee),e("button",{class:"btn btn-xs btn-error m-1",onClick:g=>m(n)().Unfriend(o.id,o.chatID)},"Unfriend",8,qe)]),e("td",null,[e("button",{class:"btn btn-xs m-1 btn-ghost",onClick:g=>me(o.id)},"invite",8,ze)])]))),128))])])])):(a(),i("h1",je,"There are no friends :c")),e("button",{class:"btn btn-primary mt-2 border-b-4 border-[#2c3551]",onClick:de},"Add a Friend")])]),e("div",Ge,[e("div",Ye,[Ve,m(n)().MeetingHistoryList.length>0?(a(),i("div",We,[e("table",Pe,[Ke,e("tbody",Qe,[(a(!0),i(D,null,B(m(n)().MeetingHistoryList,o=>(a(),i("tr",{key:o},[e("td",null,r(o.Name),1),e("td",null,r(o.LastTime.split("T")[0]),1),e("td",null,r(o.Owner),1),e("td",null,[e("button",{class:"btn btn-xs m-1",onClick:g=>be(o.RoomID,o.Name)},"Rejoin",8,Xe)])]))),128))])])])):(a(),i("h1",Ze,"You never attended any meeting yet :c"))])])]),e("div",et,[e("div",tt,[e("div",nt,[e("div",ot,[e("button",{class:I(["btn btn-ghost bg-[hsl(179,47%,50%)] text-white mt-2 px-8 border-b-4 border-white",{"btn-active":S.value}]),onClick:Z},"Join",2),e("button",{class:I(["btn btn-ghost bg-[hsl(179,47%,50%)] mt-2 text-white px-10 border-b-4 border-white",{"btn-active":!S.value}]),onClick:X},"Create",2)]),e("div",st,[e("h2",lt,r(J.value),1),L.value!=""?(a(),i("p",at,r(L.value),1)):C("",!0),H(e("input",{type:"text",placeholder:"vidoe room",class:"input w-full max-w-xs","onUpdate:modelValue":s[0]||(s[0]=o=>b.value=o)},null,512),[[$,b.value]]),e("button",{class:"btn mt-2 border-b-4 border-white",onClick:ue},r(U.value),1)])]),e("div",it,[e("div",rt,[e("button",{class:I(["btn btn-ghost bg-transparent text-white mt-2 px-8 border-b-4 border-white",{"btn-active":F.value}]),onClick:te},"Join",2),e("button",{class:I(["btn btn-ghost bg-transparent mt-2 text-white px-10 border-b-4 border-white",{"btn-active":!F.value}]),onClick:ee},"Create",2)]),e("div",ct,[e("h2",ut,r(E.value),1),N.value!=""?(a(),i("p",dt,r(N.value),1)):C("",!0),H(e("input",{type:"text",placeholder:"Document room",class:"input w-full max-w-xs","onUpdate:modelValue":s[1]||(s[1]=o=>w.value=o)},null,512),[[$,w.value]]),e("div",mt,[e("button",{class:"btn mt-3 border-b-4 border-white",onClick:ne},r(q.value),1)])])]),e("div",vt,[e("div",ht,[bt,m(n)().RequestList.length>0?(a(),i("div",gt,[e("table",ft,[pt,e("tbody",null,[(a(!0),i(D,null,B(m(n)().RequestList,o=>(a(),i("tr",{key:o},[e("td",null,r(o.username),1),e("td",null,[o.type=="gotfrom"?(a(),i(D,{key:0},[e("button",{class:"btn btn-xs m-1 btn-success",onClick:g=>m(n)().AcceptReq(o.id)},"Accept",8,_t),e("button",{class:"btn btn-xs m-1 btn-error",onClick:g=>m(n)().RejectReq(o.id)},"Reject",8,xt)],64)):(a(),i("h1",yt,"Pending"))])]))),128))])])])):(a(),i("h1",wt,"There are no Requests"))])])]),Y(fe,{duration:"550",name:"slide"},{default:ge(()=>[u.value?(a(),i("div",Ct,[e("h2",kt,[Dt,e("span",Mt,r(f.value),1)]),e("label",{class:"btn btn-sm btn-circle absolute left-2 top-2",onClick:ce},"\u2715"),e("div",It,[e("div",At,[(a(!0),i(D,null,B(c.value[h.value],o=>(a(),W(we,{key:o,msg:o.msg,me:o.from==m(n)().userDetails.id,name:o.name},null,8,["msg","me","name"]))),128))]),e("div",null,[H(e("input",{type:"text",placeholder:"Type here",class:"input input-bordered input-primary w-full max-w-xs z-20 m-auto","onUpdate:modelValue":s[2]||(s[2]=o=>d.value=o)},null,512),[[$,d.value]]),e("button",{class:"btn btn-active btn-primary w-1/4 mt-5",onClick:re},"Send!")])])])):C("",!0)]),_:1})]),Y(V,{onOnClose:s[3]||(s[3]=o=>T.value=!1),RoomName:_.value,room:b.value,Header:Q.value,txt:K.value,btn:"Not now",btn2:"Go to meeting",withBtn1:!0,withBtn2:!0,FuncBtn1:"justClose",FuncBtn2:"ReplyInivte",open:T.value},null,8,["RoomName","room","Header","txt","open"]),Y(V,{onOnClose:s[4]||(s[4]=o=>O.value=!1),RoomName:_.value,room:b.value,usernameInvite:k.value,Header:P.value,txt:"Click accept to enter!",btn:"Deny",btn2:"Accept",withBtn1:!0,withBtn2:!0,FuncBtn1:"justClose",FuncBtn2:"AcceptInivte",open:O.value},null,8,["RoomName","room","usernameInvite","Header","open"]),m(n)().IsAGuest?(a(),W(V,{key:0,onOnClose:s[5]||(s[5]=o=>p.value=!1),Header:"You can't add a friend",txt:"you have to be logged in to do that!",btn:"SignUp",btn2:"Login",withBtn1:!0,withBtn2:!0,FuncBtn1:"SignUp",FuncBtn2:"LogIn",open:p.value},null,8,["open"])):C("",!0),m(n)().IsAGuest?C("",!0):(a(),W(Re,{key:1,onOnClose:s[6]||(s[6]=o=>p.value=!1),Header:"Add a Friend!",txt:"The only thing we need is their username!",btn:"cancel",btn2:"Send!",open:p.value},null,8,["open"]))])]))}},Ft=Ce(Rt,[["__scopeId","data-v-10607a50"]]);export{Ft as default};
